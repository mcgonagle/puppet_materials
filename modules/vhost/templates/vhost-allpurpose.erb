# Autogenerated for <%= fqdn %> by puppet
#
# vhost.conf all purpose config template

<VirtualHost *:<%= tcp_port %>>
    # Secure Configuration:
    <%= secure_config %>
    <%= intermediate_certfile %>
    # Server Configuration:
    ServerName <%= vhost_name %>.<%= vhost_domain %>
    DocumentRoot "<%= doc_base %>/<%= subdir %>/"
    ServerAdmin <%= server_admin %>
    <%= vhost_alias_cmd %><% vhost_aliases.each do |vname| -%> <%= vname %><% end %>
    ServerSignature email
    DirectoryIndex index.php index.html index.htm index.shtml
    TraceEnable <%= trace_enable %>
    HostNameLookups <%= hostname_lookups %>
    # Mark requests from the loop-back interface
    SetEnvIf Remote_Addr "127\.0\.0\.1" dontlog
    # Mark requests for the robots.txt file
    # SetEnvIf Request_URI "^/robots\.txt$" dontlog
    # Logging Conditions:
    <%= logging_conditions %>
    CustomLog "|<%= rotatelogs %> -l <%= log_base %>/<%= vhost_name %>_access.%Y.%m.%d.%H.%Z.log <%= log_duration %>" combined env=!dontlog
    ErrorLog "|<%= rotatelogs %> -l <%= log_base %>/<%= vhost_name %>_error.%Y.%m.%d.%H.%Z.log <%= log_duration %>"
    # Path Aliases:
    <%= path_aliases %>
    # Error Docs:
    <%= error_documents %>
    # Server Status:
    <%= server_status %>
    # Manhunt Tools:
    <%= mh_tools %>
    # Kerberos:
    <%= kerberos_auth %>
    # Zend Console:
    <%= zend_console %>
    # Permissions for symfony directory (Alias set in vhost_aliases above)
    <Directory /usr/share/pear/data/symfony/web/sf>
         AllowOverride All
         Order deny,allow
         Allow from All
    </Directory>
    ### Allow .htaccess   (TBD - templatize)
    <Directory <%= doc_base %>/<%= subdir %>>
         AllowOverride All
    </Directory>
    ### End TBD
    # ACL Restrictions:
    <%= acl_restrictions %>
    # Per-Directory Configurations
    # Rewrite Commands:
    <%= rewrite_cmd %>
</VirtualHost>
